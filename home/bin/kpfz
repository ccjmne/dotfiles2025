#! /bin/sh

pass=$(fuzzel --password --dmenu --lines=0)
if [ -z "$pass" ]; then exit 0; fi
item=$(echo "$pass" | ifne keepassxc-cli ls   ~/main.kdbx         | fuzzel --dmenu)
if [ -z "$item" ]; then exit 0; fi
attr=$(echo "$pass" |      keepassxc-cli show ~/main.kdbx "$item" | fuzzel --dmenu --accept-nth=1 --nth-delimiter=:)
if [ -z "$attr" ]; then exit 0; fi
echo "$pass"        |      keepassxc-cli clip ~/main.kdbx "$item" --attribute "${attr}"
